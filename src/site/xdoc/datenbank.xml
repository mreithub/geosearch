<document>
  <properties>
    <author email="manuel.reithuber@student.tuwien.ac.at">Manuel Reithuber</author>
    <title>Datenbank</title>
  </properties>
  <head>
    <!-- xhtml head tag -->
  </head>
  <body>
    <section name="Datenbank">
      <subsection name="Modell">
        <img src="images/datenbankmodell.png" />
      </subsection>
      <subsection name="Einrichtung">
        <p>
          SQL-Files sind in <tt>/src/sql/</tt> sortiert nach ihren Abhängigkeiten.
          d.h. Dateien, die mit 10 beginnen haben keine Abhängigkeiten, die mit 20
          hängen von mindestens einem 10er ab, die mit 30 von mindestens einem 20er, ...
        </p>
        <p>
          Zuerst müssen die files direkt im sql ordner ausgeführt werden, dann:
          <ul>
            <li>
              Dateien direkt im <tt>sql</tt> Ordner
            </li>
            <li>Tabellen</li>
            <li>Views</li>
            <li>evtl. Daten</li>
          </ul>
        </p>
      </subsection>
    </section>
    <section name="DB-TabellenBeschreibung">
      Bitte so machen wie es unter Vorlagen steht!
      <subsection name="expiringObject">
        <table width="100%" border="1" cellspacing="0" cellpadding="2">
          <tr>
            <th>Feldname</th>
            <th>Typ</th>
            <th>Option</th>
            <th>Bemerkung</th>
          </tr>
          <tr>
            <td>obj_id</td>
            <td>INT(8)</td>
            <td>!1+PF</td>
            <td>Objekt ID; Fremdschlüssel zur geoObject-Tabelle</td>
          </tr>
          <tr>
            <td>valid_until</td>
            <td>TIMESTAMP</td>
            <td>!</td>
            <td>Zeitstempel, der den Ablauf der Gültigkeit des Objekts angibt</td>
          </tr>
        </table>
      </subsection>			<subsection name="geoObject">
        <table width="100%" border="1" cellspacing="0" cellpadding="2">
          <tr>
            <th>Feldname</th>
            <th>Typ</th>
            <th>Option</th>
            <th>Bemerkung</th>
          </tr>
          <!-- BEGIN: Diesen Bereich duplizieren -->
          <tr>
            <td>obj_id</td>
            <td>bigserial</td>
            <td>!1+P</td>
            <td>Objekt ID</td>
          </tr>
          <tr>
            <td>svc_id</td>
            <td>INT(4)</td>
            <td>!F</td>
            <td>Service ID - Fremdschlussel</td>
          </tr>
          <tr>
            <td>title</td>
            <td>VARCHAR(255)</td>
            <td>!</td>
            <td>Objekttitel </td>
          </tr>
          <tr>
            <td>link</td>
            <td>VARCHAR(255)</td>
            <td>!</td>
            <td>Link zur Objektquelle</td>
          </tr>
          <tr>
            <td>last_updated</td>
            <td>TIMESTAMP</td>
            <td>!</td>
            <td>Wann das Objekt letztens aktualisiert wurde</td>
          </tr>
          <!-- ENDE: Diesen Bereich duplizieren -->
        </table>
      </subsection>
      <subsection name="objectTag">
        <table width="100%" border="1" cellspacing="0" cellpadding="2">
          <tr>
            <th>Feldname</th>
            <th>Typ</th>
            <th>Option</th>
            <th>Bemerkung</th>
          </tr>
          <tr>
            <td>obj_id</td>
            <td>INT(8)</td>
            <td>!1+PF</td>
            <td>Objekt ID; Fremdschlüssel zur geoObject-Tabelle</td>
          </tr>
          <tr>
            <td>tag</td>
            <td>VARCHAR(255)</td>
            <td>!</td>
            <td>Beinhaltet die textuelle Repräsentation eines Tags, der zu einem geoObjekt gehört</td>
          </tr>
        </table>
      </subsection>			      <subsection name="geoRoute (nice to have)">
        <table width="100%" border="1" cellspacing="0" cellpadding="2">
          <tr>
            <th>Feldname</th>
            <th>Typ</th>
            <th>Option</th>
            <th>Bemerkung</th>
          </tr>
          <tr>
            <td>obj_id</td>
            <td>INT(8)</td>
            <td>!1+PF</td>
            <td>Objekt ID; Fremdschlüssel zur geoObject-Tabelle</td>
          </tr>
          <tr>
            <td>route</td>
            <td>TEXT</td>
            <td>!</td>
            <td>Text, der eine Route für dieses Objekt beschreibt</td>
          </tr>
        </table>
      </subsection>
      <subsection name="objectProperty">
		<table width="100%" border="1" cellspacing="0" cellpadding="2">
		  <tr>
			<th>Feldname</th>
			<th>Typ</th>
			<th>Option</th>
			<th>Bemerkung</th>
		  </tr>
		  <tr>
			<td>obj_id</td>
			<td>INT(8)</td>
			<td>![1]+PF</td>
			<td>Object ID; Frendschlüssel zur geoObject-Tabelle</td>
		  </tr>
		  <tr>
			<td>name</td>
			<td>VARCHAR(255)</td>
			<td>![1]</td>
			<td>Name des Properties; Teil des Primary Keys</td>
		  </tr>
		  <tr>
			<td>value</td>
			<td>VARCHAR(255)</td>
			<td>!</td>
			<td>Inhalt des Properties</td>
		  </tr>
		</table>
      </subsection>
      <subsection name="service">
        <table width="100%" border="1" cellspacing="0" cellpadding="2">
          <tr>
            <th>Feldname</th>
            <th>Typ</th>
            <th>Option</th>
            <th>Bemerkung</th>
          </tr>
          <!-- BEGIN: Diesen Bereich duplizieren -->
          <tr>
            <td>svn_id</td>
            <td>INT(4)</td>
            <td>!1+P</td>
            <td>Service ID</td>
          </tr>
          <tr>
            <td>name</td>
            <td>VARCHAR(255)</td>
            <td>!</td>
            <td>Name des Services (zb. Wikipedia)</td>
          </tr>
          <tr>
            <td>homepage</td>
            <td>VARCHAR(255)</td>
            <td>!</td>
            <td>OriginalQuelle (zb. de.Wikipedia.org)</td>
          </tr>
          <tr>
            <td>description</td>
            <td>TEXT</td>
            <td>!</td>
            <td></td>
          </tr>
          <tr>
            <td>stype_id</td>
            <td>INT(4)</td>
            <td>!+F</td>
            <td>ForreignKey zum ServiceTyp</td>
          </tr>
          <tr>
            <td>bubbleHTML</td>
            <td>TEXT</td>
            <td>!</td>
            <td>Beschreibt (als HTML) die der Inhalt im bubbleHTML aussehen soll. (zb. Anordnung Bild und Text)</td>
          </tr>
          <tr>
            <td>thumbnail</td>
            <td>VARCHAR(255)</td>
            <td>!</td>
            <td>Bild das den Service identifiziert</td>
          </tr>
          <!-- ENDE: Diesen Bereich duplizieren -->
        </table>
      </subsection>
      <subsection name="serviceTag">
		<table width="100%" border="1" cellspacing="0" cellpadding="2">
		  <tr>
			<th>Feldname</th>
			<th>Typ</th>
			<th>Option</th>
			<th>Bemerkung</th>
		  </tr>
		  <tr>
			<td>svc_id</td>
			<td>INT(4)</td>
			<td>![1]+PF</td>
			<td>Service ID; Frendschlüssel zur service-Tabelle</td>
		  </tr>
		  <tr>
			<td>tag</td>
			<td>VARCHAR(255)</td>
			<td>![1]</td>
			<td>Inhalt des Tags</td>
		  </tr>
		</table>
      </subsection>
      <subsection name="serviceType">
		<table width="100%" border="1" cellspacing="0" cellpadding="2">
		  <tr>
			<th>Feldname</th>
			<th>Typ</th>
			<th>Option</th>
			<th>Bemerkung</th>
		  </tr>
		  <tr>
			<td>stype_id</td>
			<td>INT(4)</td>
			<td>!1+P</td>
			<td>ServiceType ID. </td>
		  </tr>
		  <tr>
			<td>name</td>
			<td>VARCHAR(255)</td>
			<td>!</td>
			<td>Name vom ServiceType (zb. Bilder)</td>
		  </tr>
		  <tr>
			<td>thumbnail</td>
			<td>VARCHAR(255)</td>
			<td>!</td>
			<td>Thumbnail vom ServiceType (zb.: Kamera bei Bilder)</td>
		  </tr>
		</table>
      </subsection>
    </section>

  </body>
</document>
